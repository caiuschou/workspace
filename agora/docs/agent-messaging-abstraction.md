# Agent 之间通信什么（抽象）

只描述 Agent 与 Agent 之间**通信的内容与形式**，不涉及由谁转发、用什么传输。

---

## 1. 谁和谁

- 每个 Agent 有一个**稳定标识**（如 agent-id）。
- 发消息时：有**来自谁**、**发给谁**。
- 收消息时：能知道**来自谁**；若要回复，则回复给该**来源**。

---

## 2. 传什么：两种形式

| 形式 | 含义 |
|------|------|
| **一条完整消息** | 一次发出整份内容，对端一次收齐。 |
| **流式消息** | 先有一个「流开始」（可带一点元数据），再是若干**内容块**，最后「流结束」。对端按顺序收到：开始 → 块… → 结束。 |

同一次流式传输用一个 **stream_id** 标识，所有块和结束都挂在这个 stream_id 上。

---

## 3. 可否回复与关联

- 收到消息的 Agent **可以回复**，也可以不回复。
- 回复可以是：一条完整回复，或一条流式回复（开始 → 块… → 结束）。
- 若需要把「某条回复」对应到「某条请求」，可在请求里带 **request_id**，回复里带上同一个 request_id。

---

## 4. 小结：Agent 之间通信什么

| 维度 | 内容 |
|------|------|
| **参与方** | 来源标识、目标标识。 |
| **内容形式** | 一条完整消息，或一条流（开始 + 若干块 + 结束）。 |
| **关联** | 可选：request_id 把请求与回复对应起来。 |

业务含义（如 action、body 里具体字段）由各 Agent 自行约定；抽象层只约定「谁对谁、一条还是一条流、可否用 request_id 关联回复」。
