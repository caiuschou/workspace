# 场景：助理 Agent 转发用户信息给邮件收发 Agent

描述一个简单场景：用户发信息给助理，助理把相关内容转发给邮件收发 Agent 处理。

---

## 1. 参与方

| 角色 | 说明 |
|------|------|
| **用户** | 发原始请求给助理。 |
| **助理 Agent** | 收用户消息，解析意图，必要时转发给邮件 Agent。 |
| **邮件收发 Agent** | 收助理转发的「发邮件 / 查邮件」等请求，执行后可选回复。 |

通信抽象仍遵循 [agent-messaging-abstraction.md](agent-messaging-abstraction.md)：有来源、目标、一条完整消息或流、可选 request_id。

---

## 2. 流程（简化）

```
用户 ──(用户消息)──> 助理 Agent
                         │
                         │ 解析：需要发/查邮件
                         ▼
                    助理 Agent ──(转发消息)──> 邮件收发 Agent
                                                     │
                                                     ▼
                                              执行发信/查信
                                                     │
                         ◄───────────────────────────┘
                    助理 Agent ◄──(可选回复)── 邮件收发 Agent
                         │
                         ▼
用户 ◄──(助理回复)── 助理 Agent
```

- 用户只和助理通信；用户不直接和邮件 Agent 通信。
- 助理和邮件 Agent 之间：一条「转发消息」、可选一条「回复」，用 request_id 关联即可。

---

## 3. 助理 → 邮件 Agent 的消息（最小约定）

为保持简单，只约定「助理发给邮件 Agent 时带什么」，不引入复杂协议。

| 字段 | 说明 |
|------|------|
| **from** | 助理的 agent-id。 |
| **to** | 邮件收发 Agent 的 agent-id。 |
| **request_id** | 可选。用于把后续「邮件 Agent 的回复」和这次请求对应。 |
| **body** | 业务内容，由双方约定。例如：`{ "action": "send", "to": "user@example.com", "subject": "...", "body": "..." }` 或 `{ "action": "list" }`。 |

邮件 Agent 若回复，则带上同一 **request_id**，助理即可把结果整合后回复用户。

---

## 4. 小结

- **场景**：用户 → 助理 → 邮件收发 Agent；回复路径：邮件 Agent → 助理 → 用户。
- **设计要点**：助理作为中间方，只做转发与结果汇总；助理与邮件 Agent 之间用现有抽象（谁对谁、完整消息、可选 request_id）即可，无需额外协议。
